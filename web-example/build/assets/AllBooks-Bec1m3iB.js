import{B as T,s as G,o as g,c as C,r as J,m as K,i as E,j as m,d as j,e as N,w as V,b as u,f as e,g as c,u as l,F as H,k as Q,t as q,l as R,a as A,n as W,p as F,h as X}from"./app-BT67MAIW.js";import{s as S,a as D,b as L,c as P,d as z,e as k,f as Y,g as Z,h as ee}from"./index-C0XN_MSn.js";import{u as I,a as le}from"./books-B5J2zA5Q.js";var ae=function(v){var r=v.dt;return`
.p-floatlabel {
    display: block;
    position: relative;
}

.p-floatlabel label {
    position: absolute;
    pointer-events: none;
    top: 50%;
    margin-top: -.5rem;
    transition-property: all;
    transition-timing-function: ease;
    line-height: 1;
    left: 0.75rem;
    color: `.concat(r("floatlabel.color"),`;
    transition-duration: `).concat(r("floatlabel.transition.duration"),`;
}

.p-floatlabel:has(textarea) label {
    top: 1rem;
}

.p-floatlabel:has(input:focus) label,
.p-floatlabel:has(input.p-filled) label,
.p-floatlabel:has(input:-webkit-autofill) label,
.p-floatlabel:has(textarea:focus) label,
.p-floatlabel:has(textarea.p-filled) label,
.p-floatlabel:has(.p-inputwrapper-focus) label,
.p-floatlabel:has(.p-inputwrapper-filled) label {
    top: -.75rem;
    font-size: 12px;
    color: `).concat(r("floatlabel.focus.color"),`;
}

.p-floatlabel .p-placeholder,
.p-floatlabel input::placeholder,
.p-floatlabel .p-inputtext::placeholder {
    opacity: 0;
    transition-property: all;
    transition-timing-function: ease;
}

.p-floatlabel .p-focus .p-placeholder,
.p-floatlabel input:focus::placeholder,
.p-floatlabel .p-inputtext:focus::placeholder {
    opacity: 1;
    transition-property: all;
    transition-timing-function: ease;
}

.p-floatlabel > .p-invalid + label {
    color: `).concat(r("floatlabel.invalid.color"),`;
}
`)},te={root:"p-floatlabel"},oe=T.extend({name:"floatlabel",theme:ae,classes:te}),ie={name:"BaseFloatLabel",extends:G,props:{},style:oe,provide:function(){return{$pcFloatLabel:this,$parentInstance:this}}},_={name:"FloatLabel",extends:ie,inheritAttrs:!1};function se(p,v,r,i,s,w){return g(),C("span",K({class:p.cx("root")},p.ptmi("root")),[J(p.$slots,"default")],16)}_.render=se;const ne={class:"card flex justify-center"},re={class:"card flex flex-col rounded-md gap-y-8"},de=u("label",{for:""},"Nombre Libro",-1),ue=u("label",{for:""},"ISBN",-1),ce=u("label",{for:""},"Disponibilidad",-1),be=u("label",{for:"dd-location"},"Seleccione una ubicacion",-1),pe=u("label",null,"Seleccione un autor",-1),fe={__name:"NewBook",props:{visible:{type:Boolean}},emits:["update:visible"],setup(p,{emit:v}){const r=v,i=p,s=I(),w=E(),h=m([]),b=m([]),a=m(i.visible),o=j({name:"",isbn:"",availability:0,location_id:null,author_id:null}),$=async()=>{await s.saveBook(o).then(()=>{x(),r("update:visible"),w.add({severity:"success",summary:"Libro Guardado",life:3e3})})},x=()=>{o.author_id=null,o.availability=0,o.isbn="",o.location_id=null,o.name=""};return N(()=>{s.getLocations(),s.getAuthors()}),V(()=>{a.value=i.visible}),V(()=>{s.locations.length>0&&s.authors.length>0&&(b.value=s.locations,h.value=s.authors)}),(d,t)=>(g(),C(H,null,[u("div",ne,[e(l(P),{visible:a.value,"onUpdate:visible":t[5]||(t[5]=n=>a.value=n),modal:"",header:"Agregar Libro",style:{width:"50vw"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{default:c(()=>[u("div",re,[e(l(_),{class:"mt-6"},{default:c(()=>[e(l(S),{modelValue:o.name,"onUpdate:modelValue":t[0]||(t[0]=n=>o.name=n),id:"",class:"w-full",required:""},null,8,["modelValue"]),de]),_:1}),e(l(_),null,{default:c(()=>[e(l(S),{modelValue:o.isbn,"onUpdate:modelValue":t[1]||(t[1]=n=>o.isbn=n),id:"",class:"w-full",required:""},null,8,["modelValue"]),ue]),_:1}),e(l(_),null,{default:c(()=>[e(l(S),{modelValue:o.availability,"onUpdate:modelValue":t[2]||(t[2]=n=>o.availability=n),id:"",class:"w-full",required:""},null,8,["modelValue"]),ce]),_:1}),e(l(_),null,{default:c(()=>[e(l(D),{modelValue:o.location_id,"onUpdate:modelValue":t[3]||(t[3]=n=>o.location_id=n),inputId:"dd-location",options:b.value,optionLabel:"name",optionValue:"id",class:"w-full",required:""},null,8,["modelValue","options"]),be]),_:1}),e(l(_),null,{default:c(()=>[e(l(D),{modelValue:o.author_id,"onUpdate:modelValue":t[4]||(t[4]=n=>o.author_id=n),options:h.value,optionLabel:"author",optionValue:"id",class:"w-full",required:""},null,8,["modelValue","options"]),pe]),_:1}),e(l(L),{label:"Agregar",onClick:$})])]),_:1},8,["visible"])]),e(l(z))],64))}},me={class:"card flex justify-center"},ve={class:"card flex flex-col rounded-md gap-y-8"},he=u("label",{for:""},"Nombre Libro",-1),ye=u("label",{for:""},"ISBN",-1),_e=u("label",{for:""},"Disponibilidad",-1),we=u("label",{for:"dd-location"},"Seleccione una ubicacion",-1),ke=u("label",{for:"dd-author"},"Seleccione un autor",-1),ge={__name:"EditBook",props:{data:{type:Object},visible:{type:Boolean}},emits:["update:visible"],setup(p,{emit:v}){const r=v,i=p,s=I(),w=m([]),h=m([]),b=m(i.visible),a=j({name:"",isbn:"",availability:0,location_id:null,author_id:null}),o=async x=>{await s.updateBook(x,a).then(()=>{$(),r("update:visible")})},$=()=>{a.author_id=null,a.availability=0,a.isbn="",a.location_id=null,a.name=""};return N(()=>{s.getLocations(),s.getAuthors()}),V(()=>{b.value=i.visible}),V(()=>{s.locations.length>0&&s.authors.length>0&&(h.value=s.locations,w.value=s.authors)}),V(()=>{i.data&&(a.book_id=i.data.book_id,a.author_id=i.data.author_id,a.availability=i.data.availability,a.isbn=i.data.isbn,a.location_id=i.data.location_id,a.name=i.data.name)}),(x,d)=>(g(),C("div",me,[e(l(P),{visible:b.value,"onUpdate:visible":d[6]||(d[6]=t=>b.value=t),modal:"",header:"Actualizar Libro",style:{width:"50vw"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{default:c(()=>[u("div",ve,[e(l(_),{class:"mt-6"},{default:c(()=>[e(l(S),{modelValue:a.name,"onUpdate:modelValue":d[0]||(d[0]=t=>a.name=t),id:"",class:"w-full"},null,8,["modelValue"]),he]),_:1}),e(l(_),null,{default:c(()=>[e(l(S),{modelValue:a.isbn,"onUpdate:modelValue":d[1]||(d[1]=t=>a.isbn=t),id:"",class:"w-full"},null,8,["modelValue"]),ye]),_:1}),e(l(_),null,{default:c(()=>[e(l(S),{modelValue:a.availability,"onUpdate:modelValue":d[2]||(d[2]=t=>a.availability=t),id:"",class:"w-full"},null,8,["modelValue"]),_e]),_:1}),e(l(_),null,{default:c(()=>[e(l(D),{modelValue:a.location_id,"onUpdate:modelValue":d[3]||(d[3]=t=>a.location_id=t),inputId:"dd-location",options:h.value,optionLabel:"name",optionValue:"id",class:"w-full"},null,8,["modelValue","options"]),we]),_:1}),e(l(_),null,{default:c(()=>[e(l(D),{modelValue:a.author_id,"onUpdate:modelValue":d[4]||(d[4]=t=>a.author_id=t),inputId:"dd-author",options:w.value,optionLabel:"author",optionValue:"id",class:"w-full"},null,8,["modelValue","options"]),ke]),_:1}),e(l(L),{label:"Actualizar",onClick:d[5]||(d[5]=t=>o(i.data.id))})])]),_:1},8,["visible"])]))}},Ve=Q("users",()=>{const p=m([]);return{users:p,getUsers:async()=>{await le.get("/users").then(r=>{console.log(r.data),p.value=r.data.data}).catch(r=>{console.log(r)})}}}),$e={class:"card flex justify-center"},xe={class:"card flex flex-col"},Le={class:"text-3xl text-center font-semibold text-gray-300"},Be=u("label",{for:"dd-author"},"Seleccione un usuario",-1),Ue={key:0,class:"text-red-600"},Se={__name:"LoanBook",props:{book:{type:Object},visible:{type:Boolean}},emits:["update:visible"],setup(p,{emit:v}){const r=v,i=p,s=m(i.visible),w=m([]),h=Ve(),b=I(),a=E(),o=j({user_id:null}),$=j({status:!1,message:""}),x=async t=>{let n={user_id:o.user_id};await b.loanBook(t,n).then(()=>{o.user_id=null,r("update:visible")}).catch(()=>b.hasErrors(!0)),b.errors.status||a.add({severity:"success",summary:"Libro Prestado",life:3e3})},d=()=>{a.add({severity:"error",summary:b.errors.message,life:3e3})};return N(()=>{h.getUsers()}),V(()=>{h.users.length>0&&(w.value=h.users)}),V(()=>{b.errors.status&&d()}),V(()=>{s.value=i.visible}),(t,n)=>(g(),C(H,null,[u("div",$e,[e(l(P),{visible:s.value,"onUpdate:visible":n[2]||(n[2]=B=>s.value=B),modal:"",header:"Prestar Libro",style:{width:"50vw"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{default:c(()=>[u("div",xe,[u("h2",Le,q(i.book.name),1),e(l(_),{class:"mt-5 mb-5"},{default:c(()=>[e(l(D),{modelValue:o.user_id,"onUpdate:modelValue":n[0]||(n[0]=B=>o.user_id=B),inputId:"dd-author",options:w.value,optionLabel:"name",optionValue:"id",class:"w-full"},null,8,["modelValue","options"]),Be]),_:1}),e(l(L),{label:"Prestar",onClick:n[1]||(n[1]=R(B=>x(i.book.id),["prevent"]))}),$.status?(g(),C("h2",Ue,q($.message),1)):A("",!0)])]),_:1},8,["visible"])]),e(l(z))],64))}},Ce={class:"card mt-10 mx-5"},De={class:"flex lg:flex-row flex-col lg:gap-x-2 gap-y-2"},Ie={__name:"AllBooks",setup(p){const v=W(),r=E(),i=I(),s=m([]),w=m({}),h=m({}),b=m(!1),a=m(!1),o=m(!1),$=()=>{b.value=!b.value},x=y=>{a.value=!a.value,w.value=y},d=y=>{o.value=!o.value,h.value=y},t=y=>{v.require({message:"Deseas deshabilitar este Libro?",header:"Deshabilitar Libro",icon:"pi pi-info-circle",rejectLabel:"Cancel",rejectProps:{label:"Cancelar",severity:"secondary",outlined:!0},acceptProps:{label:"Deshabilitar",severity:"danger"},accept:async()=>{await B(y),r.add({severity:"success",summary:"Libro Deshabilitado",life:3e3})},reject:()=>{r.add({severity:"error",summary:"Has cancelado la deshabilitación del libro",life:3e3})}})},n=y=>{v.require({message:"Deseas habilitar este Libro?",header:"Habilitar Libro",icon:"pi pi-info-circle",rejectLabel:"Cancel",rejectProps:{label:"Cancelar",severity:"secondary",outlined:!0},acceptProps:{label:"Habilitar",severity:"danger"},accept:async()=>{await O(y),r.add({severity:"success",summary:"Libro Habilitado",life:3e3})},reject:()=>{r.add({severity:"error",summary:"Has cancelado la habilitación del libro",life:3e3})}})},B=async y=>{await i.disableBook(y)},O=async y=>{await i.allowBook(y)};return N(()=>{i.fetchDataAllBooks()}),V(()=>{i.books.length>0&&(s.value=i.books)}),(y,U)=>(g(),C(H,null,[u("div",Ce,[e(l(Z),{value:s.value,paginator:"",rows:5,rowsPerPageOptions:[5,10,20,50]},{default:c(()=>[e(l(k),{field:"id",header:"ID",style:{width:"25%"}}),e(l(k),{field:"isbn",header:"ISBN",style:{width:"25%"}}),e(l(k),{field:"name",header:"Nombre",style:{width:"25%"}}),e(l(k),{field:"availability",header:"Disponibilidad",style:{width:"25%"}}),e(l(k),{field:"location.name",header:"Ubicación",style:{width:"25%"}}),e(l(k),{field:"author.author",header:"Autor",style:{width:"50%"}}),e(l(k),{field:"created_at",header:"Creado",style:{width:"25%"}}),e(l(k),{header:"Acciones",style:{width:"25%"}},{body:c(f=>[u("div",De,[f.data.status==1?(g(),F(l(L),{key:0,onClick:M=>t(f.data.id),label:"Deshabilitar Libro",severity:"danger",outlined:""},null,8,["onClick"])):A("",!0),f.data.status==0?(g(),F(l(L),{key:1,onClick:M=>n(f.data.id),label:"Habilitar Libro",severity:"help",outlined:""},null,8,["onClick"])):A("",!0),f.data.status==1?(g(),F(l(L),{key:2,label:"Prestar Libro",severity:"info",outlined:"",onClick:M=>d(f.data)},null,8,["onClick"])):A("",!0),e(l(L),{label:"Actualizar Libro",severity:"contrast",outlined:"",onClick:M=>x(f.data)},null,8,["onClick"])])]),_:1}),e(l(k),{header:"Estado",style:{width:"25%"}},{body:c(f=>[e(l(Y),null,{default:c(()=>[X(q(f.data.status==1?"Disponible":"No Disponible"),1)]),_:2},1024)]),_:1})]),_:1},8,["value"]),e(l(L),{label:"Agregar Libro",class:"mt-10",onClick:$})]),e(l(z)),e(l(ee)),e(fe,{visible:b.value,"onUpdate:visible":U[0]||(U[0]=f=>b.value=f)},null,8,["visible"]),e(ge,{visible:a.value,"onUpdate:visible":U[1]||(U[1]=f=>a.value=f),data:w.value},null,8,["visible","data"]),e(Se,{visible:o.value,"onUpdate:visible":U[2]||(U[2]=f=>o.value=f),book:h.value},null,8,["visible","book"])],64))}};export{Ie as default};
