import{n as p,i as m,j as v,e as y,w as b,o as n,c as _,b as u,f as a,g as r,u as e,F as g,p as k,a as w,h as D,t as L}from"./app-BT67MAIW.js";import{u as x}from"./books-B5J2zA5Q.js";import{e as s,b as B,f as C,g as $,d as N,h as j}from"./index-C0XN_MSn.js";const P={class:"m-2"},V={class:"flex lg:flex-row flex-col lg:gap-x-2 gap-y-2"},A={__name:"LoanedBooks",setup(E){const o=x(),f=p(),l=m(),i=v([]),h=(d,c)=>{f.require({message:"Deseas devolver este Libro?",header:"Devolución de Libro",icon:"pi pi-info-circle",rejectLabel:"Cancel",rejectProps:{label:"Cancelar",severity:"secondary",outlined:!0},acceptProps:{label:"Devolver",severity:"danger"},accept:async()=>{let t={user_id:c.id};await o.returnBook(d,t),l.add({severity:"success",summary:"Libro Devuelto",life:3e3})},reject:()=>{l.add({severity:"error",summary:"No se ha devuelto el libro",life:3e3})}})};return y(()=>{o.getLoanedBooks()}),b(()=>{o.booksLoaned.length>0&&(i.value=o.booksLoaned)}),(d,c)=>(n(),_(g,null,[u("div",P,[a(e($),{value:i.value,paginator:"",rows:5,rowsPerPageOptions:[5,10,20,50]},{default:r(()=>[a(e(s),{field:"id",header:"ID",style:{width:"25%"}}),a(e(s),{field:"book.name",header:"Libro",style:{width:"25%"}}),a(e(s),{field:"user.name",header:"Usuario",style:{width:"25%"}}),a(e(s),{field:"loan_at",header:"Prestado el",style:{width:"25%"}}),a(e(s),{field:"returned_at",header:"Devuelto el",style:{width:"25%"}}),a(e(s),{header:"Acciones",style:{width:"25%"}},{body:r(t=>[u("div",V,[t.data.status==1?(n(),k(e(B),{key:0,onClick:F=>h(t.data.book.id,t.data.user),label:"Devolución de Libro",severity:"help",outlined:""},null,8,["onClick"])):w("",!0)])]),_:1}),a(e(s),{header:"Estado",style:{width:"25%"}},{body:r(t=>[a(e(C),null,{default:r(()=>[D(L(t.data.status==1?"Prestado":"Devuelto"),1)]),_:2},1024)]),_:1})]),_:1},8,["value"])]),a(e(N)),a(e(j))],64))}};export{A as default};
